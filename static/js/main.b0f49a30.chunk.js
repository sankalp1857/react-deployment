(this["webpackJsonpdevice-dashboard"]=this["webpackJsonpdevice-dashboard"]||[]).push([[0],{112:function(e,t){},126:function(e,t,c){var a=c(143).energyAuditorv1,r=c(144),s=c(145),n=a.hostUrl,o=a.port,i=new r.Client(n,o,"");e.exports={mqttConnection:function(){var e={keepalive:60,clientId:"mqttjs_"+Math.random().toString(16).substr(2,8),protocolId:"MQTT",protocolVersion:4,clean:!0,reconnectPeriod:1e3,connectTimeout:3e4,will:{topic:"WillMsg",payload:"Connection Closed abnormally..!",qos:0,retain:!1}};console.log("Connecting mqtt client");var t=s.connect("wss://broker.emqx.io:8084/mqtt",e);t.on("connect",(function(){console.log("connected"),t.subscribe(a.subscribeTopic)})),t.on("message",(function(e,t,c){console.log("Received Message: ".concat(t.toString()," On topic: ").concat(e)),localStorage.setItem("mqttMessage",t.toString())})),t.on("error",(function(e){console.log("Connection error: ",e),t.end()})),t.on("reconnect",(function(){console.log("Reconnecting...")}))},publishData:function(){var e={id:"90BCDA070",epochTime:Date.now(),pos:parseInt(localStorage.getItem("state"))};i.publish(a.publishTopic,JSON.stringify(e)),console.log("sent packet: "+JSON.stringify(e))}}},133:function(e,t,c){},134:function(e,t,c){},138:function(e,t,c){},139:function(e,t,c){},143:function(e,t){e.exports={energyAuditorv1:{hostUrl:"broker.emqx.io",port:8084,username:"demo",password:"demo",topic:"ip/eatest",reconnectTimeout:2e3,subscribeTopic:"ip/ea/dashboard/demo",publishTopic:"ip/ea/config"}}},153:function(e,t){},155:function(e,t){},208:function(e,t){},210:function(e,t){},212:function(e,t){},214:function(e,t){},225:function(e,t,c){"use strict";c.r(t);var a=c(0),r=c.n(a),s=c(123),n=c.n(s),o=(c(133),c(134),c(125)),i=c(3),l=c(5),d=c(23),j=c(22),b=c(1),h=function(e){var t=e.Source,c=e.Energy,r=Object(a.useState)(0),s=Object(l.a)(r,2),n=s[0],o=s[1],i=Object(a.useState)(0),h=Object(l.a)(i,2),O=h[0],u=h[1],x=Object(a.useState)(0),m=Object(l.a)(x,2),g=m[0],p=m[1],v=Object(a.useState)(0),f=Object(l.a)(v,2),y=f[0],N=f[1],S=Object(a.useState)(0),C=Object(l.a)(S,2),w=C[0],P=C[1],D=Object(a.useState)(0),k=Object(l.a)(D,2),I=k[0],A=k[1],B=Object(a.useState)(0),F=Object(l.a)(B,2),T=F[0],E=F[1],q=Object(a.useState)(0),M=Object(l.a)(q,2),V=M[0],J=M[1],R=Object(a.useState)(0),W=Object(l.a)(R,2),z=W[0],L=W[1],H=Object(a.useState)(0),_=Object(l.a)(H,2),U=_[0],Q=_[1];return Object(a.useEffect)((function(){var e=setInterval((function(){var e=localStorage.getItem("mqttMessage");if(null!=e){var a=JSON.parse(e).data;o(a[c]);for(var r=0;r<a[t].length;r++){switch(a[t][r].PID){case"1":u(a[t][r].P),P(a[t][r].I),J(a[t][r].V);break;case"2":p(a[t][r].P),A(a[t][r].I),L(a[t][1].V);break;case"3":N(a[t][r].P),E(a[t][r].I),Q(a[t][r].V);break;default:console.log("Invalid PhaseID")}}}}),1e3);return function(){return clearInterval(e)}}),[]),Object(b.jsxs)("div",{className:"flashCards row",id:"parameterCards",children:[Object(b.jsx)("div",{className:"card",style:{width:"32vh"},id:"sourceControl",children:Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsxs)("h5",{className:"card-title",children:["source1"===t?"Source 1":"Source 2"," "]}),Object(b.jsx)("br",{}),Object(b.jsxs)("h5",{className:"card-title",children:["Energy : ",n," units"]})]})}),Object(b.jsx)("div",{className:"card",id:"Phase1",style:{width:"32vh"},children:Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsx)("h5",{className:"card-title",children:"Phase 1"}),Object(b.jsx)("table",{children:Object(b.jsxs)("tbody",{children:[Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsx)(d.a,{icon:j.c})}),Object(b.jsxs)("td",{className:"parameter",id:"Power1",children:[O," kW"]})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsx)(d.a,{icon:j.b})}),Object(b.jsxs)("td",{className:"parameter",id:"Current1",children:[w," A"]})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsx)(d.a,{icon:j.a})}),Object(b.jsxs)("td",{className:"parameter",id:"Voltage1",children:[V," V"]})]})]})})]})}),Object(b.jsx)("div",{className:"card",id:"Phase2",style:{width:"32vh"},children:Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsx)("h5",{className:"card-title",children:"Phase 2"}),Object(b.jsx)("table",{children:Object(b.jsxs)("tbody",{children:[Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsx)(d.a,{icon:j.c})}),Object(b.jsxs)("td",{className:"parameter",id:"Power2",children:[g," kW"]})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsx)(d.a,{icon:j.b})}),Object(b.jsxs)("td",{className:"parameter",id:"Current2",children:[I," A"]})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsx)(d.a,{icon:j.a})}),Object(b.jsxs)("td",{className:"parameter",id:"Voltage2",children:[z," V"]})]})]})})]})}),Object(b.jsx)("div",{className:"card",id:"Phase3",style:{width:"32vh"},children:Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsx)("h5",{className:"card-title",children:"Phase 3"}),Object(b.jsx)("table",{children:Object(b.jsxs)("tbody",{children:[Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsx)(d.a,{icon:j.c})}),Object(b.jsxs)("td",{className:"parameter",id:"Power3",children:[y," kW"]})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsx)(d.a,{icon:j.b})}),Object(b.jsxs)("td",{className:"parameter",id:"Current3",children:[T," A"]})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsx)(d.a,{icon:j.a})}),Object(b.jsxs)("td",{className:"parameter",id:"Voltage3",children:[U," V"]})]})]})})]})})]})},O=(c(138),function(){return Object(b.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary",children:[Object(b.jsx)("p",{className:"navbar-brand",children:Object(b.jsx)("img",{className:"nav-logo",src:"havellslogo.png",alt:"",style:{height:"40px",weight:"40px"}})}),Object(b.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(b.jsx)("span",{className:"navbar-toggler-icon"})}),Object(b.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[Object(b.jsx)("ul",{className:"navbar-nav mx-auto",children:Object(b.jsx)("li",{className:"nav-item active",children:Object(b.jsx)("h4",{className:"nav-link title",children:"Energy Auditor IP Dashboard"})})}),Object(b.jsxs)("div",{className:"dropdown my-2 my-lg-0",style:{marginRight:"1%"},children:[Object(b.jsx)("button",{className:"btn btn-secondary dropdown-toggle bg-transparent border-0 deviceID",type:"button",id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false",children:"981DA67BC82981343ADCBF6987F008D1EADBFC"}),Object(b.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton",children:[Object(b.jsx)("li",{children:Object(b.jsx)("a",{className:"dropdown-item",href:"#",children:"684DA67BC82981343ADCBF6987F008D1EADBFC"})}),Object(b.jsx)("li",{children:Object(b.jsx)("a",{className:"dropdown-item",href:"#",children:"781DA67BC82981343ADCBF6987F008D1EADBFC"})}),Object(b.jsx)("li",{children:Object(b.jsx)("a",{className:"dropdown-item",href:"#",children:"587DA67BC82981343ADCBF6987F008D1EADBFC"})})]})]})]})]})}),u=(c(139),function(){return Object(b.jsx)("div",{className:"text-center",id:"footer",style:{backgroundColor:"rgba(0, 0, 0, 0.1)"},children:Object(b.jsx)("p",{children:"\xa9 2023 Copyright: Havells India Ltd."})})}),x=c(11),m=c(124),g=c.n(m),p=function(e){var t,c,r,s=e.Source,n=e.id,o=Object(a.useState)([]),i=Object(l.a)(o,2),d=i[0],j=i[1],h=Object(a.useState)([[],[],[]]),O=Object(l.a)(h,2),u=O[0],m=O[1],p=n,v="source1"===s?"Source 1":"Source 2";return Object(a.useEffect)((function(){var e=setInterval((function(){var e=localStorage.getItem("mqttMessage");if(null!=e)for(var a=JSON.parse(e).data,n=0;n<a[s].length;n++){switch(a[s][n].PID){case"1":t=a[s][n].P;break;case"2":c=a[s][n].P;break;case"3":r=a[s][n].P;break;default:console.log("Invalid PhaseID")}}var o=(new Date).toLocaleTimeString();j((function(e){return[].concat(Object(x.a)(e),[o]).slice(-30)})),m((function(e){return[[].concat(Object(x.a)(e[0]),[t]).slice(-30),[].concat(Object(x.a)(e[1]),[c]).slice(-30),[].concat(Object(x.a)(e[2]),[r]).slice(-30)]}))}),1e3);return function(){return clearInterval(e)}}),[]),Object(a.useEffect)((function(){g.a.newPlot(p,[{x:d,y:u[0],type:"scatter",fill:"tozeroy",fillcolor:"rgba(28, 122, 176, 0.6)",mode:"lines",name:"Phase 1",marker:{color:"#459ed1",line:{color:"#1c7ab0"}}},{x:d,y:u[1],type:"scatter",fill:"tozeroy",fillcolor:"rgba(28, 122, 176, 0.4)",mode:"lines",name:"Phase 2",marker:{color:"#459ed1",line:{color:"#1c7ab0"}}},{x:d,y:u[2],type:"scatter",fill:"tozeroy",fillcolor:"rgba(28, 122, 176, 0.2)",mode:"lines",name:"Phase 3",marker:{color:"#459ed1",line:{color:"#1c7ab0"}}}],{title:"Power Representation: "+v,xaxis:{title:"Time",linecolor:"gray",gridcolor:"lightgray",standoff:50,tickmode:"auto",nticks:6},yaxis:{title:"Power (kW)",linecolor:"gray",color:"gray",gridcolor:"lightgray"},config:{displayModeBar:!1,displaylogo:!1},paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)",autosize:!0,bordercolor:"black",borderwidth:2})}),[d,u]),Object(b.jsx)("div",{className:"graph",children:Object(b.jsx)("div",{id:n})})},v=function(){return Object(b.jsxs)("div",{className:"Home",id:"Home",children:[Object(b.jsx)(O,{}),Object(b.jsxs)("div",{className:"row",children:[Object(b.jsxs)("div",{className:"mainSection",id:"mainSection",children:[Object(b.jsx)(h,{Source:"source1",Energy:"energy1"}),Object(b.jsx)(h,{Source:"source2",Energy:"energy2"}),Object(b.jsx)(p,{Source:"source1",id:"chart1"}),Object(b.jsx)(p,{Source:"source2",id:"chart2"})]}),Object(b.jsx)(u,{})]})]})};var f=function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(o.a,{children:Object(b.jsx)(i.c,{children:Object(b.jsx)(i.a,{path:"/",element:Object(b.jsx)(v,{})})})})})},y=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,227)).then((function(t){var c=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,n=t.getTTFB;c(e),a(e),r(e),s(e),n(e)}))},N=c(126),S=c.n(N);n.a.createRoot(document.getElementById("root")).render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(f,{})})),S.a.mqttConnection(),y()}},[[225,1,2]]]);
//# sourceMappingURL=main.b0f49a30.chunk.js.map